<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="用来记录个人的leetcode刷题记录，包含每一题个人思路详解。"><title>船票预定系统 | lelouch的leetcode刷题记录</title><link rel="stylesheet" type="text/css" href="/leetcode/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/leetcode/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/leetcode/favicon.ico"><link rel="apple-touch-icon" href="/leetcode/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/leetcode/apple-touch-icon.png"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">船票预定系统</h1><a id="logo" href="/leetcode/.">lelouch的leetcode刷题记录</a><p class="description">leetcode刷题记录，每一题都包含个人思路详解。</p></div><div id="nav-menu"><a class="current" href="/leetcode/."><i class="fa fa-home"> 首页</i></a><a href="/leetcode/archives/"><i class="fa fa-archive"> 归档</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">船票预定系统</h1><div class="post-meta">2021-09-23<span> | </span><span class="category"><a href="/leetcode/categories/Exams/">Exams</a></span></div><div class="post-content"><p>  国庆将至，慧通计划推出游轮东南亚7日游，请你帮忙设计一个船票预订系统，实现以下功能：</p>
<p>  TicketSystem(int[] cabins) —— 初始化船舱数及每个船舱的座位数，cabins 下标表示舱位号，值表示对应舱位的座位数量，座位号从 0 开始编号。</p>
<p>  book(int id, int cabinId, int num) —— 从 cabinId 舱位中预定 num 个座位，订单编号为 id。</p>
<pre><code>若对应舱位候补队列为空：
</code></pre>
<p>  对应舱位有足够的余票，则预订成功并按「连续优先订票规则」分配座位，返回 true；</p>
<p>  对应舱位余票不足，则预订失败并进入该舱位候补队列队尾，返回 false；</p>
<pre><code>只要对应舱位候补队列非空，则预订失败并进入该舱位候补队列队尾，返回 false。
</code></pre>
<p>  候补队列是用来存放预订失败的订单，新的候补订单放在队尾。<br>注：订单编号 id 全局唯一，且在预订座位时 id 不会重复使用。</p>
<p>  cancel(int id) —— 取消编号为 id 的订单，并及时处理候补队列订单。</p>
<pre><code>若该订单已预订成功，则成功取消订单、退票并返回 true；

若该订单位于候补队列，则成功取消订单、离开候补队列并返回 true；

若该订单不存在或者已取消，返回 false。
</code></pre>
<p>  处理规则：当成功取消订单后（含从候补队列取消），按照「先进先出」持续处理候补队列队首的订单，若余票满足队首订单需求，则预订成功，并从候补队列移除；继续处理队首订单，直到余票无法满足要求或候补队列为空为止。</p>
<p>  query(id) —— 查询编号为 id 的订单预定的最小的座位编号。</p>
<pre><code>若订单已预定成功，返回最小的座位编号；

若订单状态为候补/已取消/不存在，返回 -1。
</code></pre>
<p>「连续优先订票规则」：</p>
<pre><code>     若存在连续的 num 个座位号，则优先分配 num 个连续座位给乘客，且座位号尽可能小；

     若不存在连续的 num 个座位号，则分配座位号尽可能小的 num 个座位给乘客。

     示例 1：
</code></pre>
<p>输入：<br>[“TicketSystem”,”book”,”query”,”cancel”,”cancel”]<br>[[[6,5]],[10,1,3],[10],[10],[20]]</p>
<p>输出：[null,true,0,true,false]</p>
<p>解释：<br>TicketSystem obj = TicketSystem([6,5]); // 初始化座位数量，舱位 0 有 6 个座位，舱位 1 有 5 个座位。<br>obj.book(10,1,3); // 编号为 10 的订单中预定了舱位 1 的 3 个座位，预订的座位编号为 [0,1,2]，返回 true；<br>obj.query(10); // 返回订单 10 最小的座位编号 0；<br>obj.cancel(10); // 存在编号为 10 订单，由于已预定成功，退票并返回 true；<br>obj.cancel(20); // 由于编号为 20 的订单不存在，因此返回 false；<br>注：输出中的 null 表示此对应函数无输出（其中：C 的构造函数有返回值，但是也是无需输出）</p>
<p>示例 2：</p>
<p>输入：<br>[“TicketSystem”,”book”,”book”,”book”,”query”,”book”,”cancel”,”query”,”query”,”cancel”,”book”,”query”,”cancel”,”book”,”book”,”cancel”,”book”,”query”]<br>[[[10,1]],[71,0,2],[73,0,10],[72,0,2],[72],[74,0,2],[73],[74],[72],[72],[75,0,3],[75],[75],[76,0,2],[77,0,2],[76],[78,0,3],[78]]</p>
<p>输出：[null,true,false,false,-1,false,true,4,2,true,true,6,true,true,true,true,true,2]</p>
<p>解释：<br>TicketSystem obj = TicketSystem([10,1]); // 初始化座位数量，舱位 0~1 分别有 10、1 个座位；<br>obj.book(71,0,2); // 预订成功，座位编号连续，为 [0,1]，返回 true；<br>obj.book(73,0,10); // 余票不足，预订失败进入候补队列，返回 false；<br>obj.book(72,0,2); // 余票足够但候补队列非空，预定失败进入候补队列，返回 false；<br>obj.query(72); // 返回 -1；<br>obj.book(74,0,2); // 返回 false；<br>obj.cancel(73); // 取消订单成功，处理候补队列订单：队首订单 72 预约成功，座位编号为 [2,3]；订单 74 预约成功，座位编号为 [4,5]，返回 true；<br>obj.query(74); // 返回 4；<br>obj.query(72); // 返回 2；<br>obj.cancel(72); // 取消订单成功，候补队列为空无需处理，返回 true；<br>obj.book(75,0,3); // 返回 true，座位连续优先，座位编号为 [6,7,8]；<br>obj.query(75); // 返回 6；<br>obj.cancel(75); // 返回 true；<br>obj.book(76,0,2); // 返回 true，座位编号为 [2,3]；<br>obj.book(77,0,2); // 返回 true，座位编号为 [6,7]；<br>obj.cancel(76); // 返回 true；<br>obj.book(78,0,3); // 返回 true，无连续座位，座位编号为 [2,3,8]；<br>obj.query(78); // 返回订单 78 最小的座位编号 2；<br>注：输出中的 null 表示此对应函数无输出（其中：C 的构造函数有返回值，但是也是无需输出）</p>
<p>提示：</p>
<p>1 &lt;= book, cancel, query 累计操作数 &lt;= 1000</p>
<p>1 &lt;= cabins.length &lt;= 10</p>
<p>1 &lt;= id &lt;= 1000</p>
<p>1 &lt;= cabins[i] &lt;= 1000</p>
<p>0 &lt;= cabinId &lt; cabins.length</p>
<p>1 &lt;= num &lt;= 10 且不超过对应舱位座位数</p>
<figure class="highlight javascript"><figcaption><span>4.js</span><a href="/leetcode/code/others/4.js">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TicketSystem</span> </span>{</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">arr</span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.cabins = arr.map(<span class="function"><span class="params">num</span> =&gt;</span> {</span><br><span class="line">      <span class="keyword">return</span> {</span><br><span class="line">        remain: num,</span><br><span class="line">        seat: <span class="keyword">new</span> <span class="built_in">Array</span>(num).fill(<span class="literal">false</span>),</span><br><span class="line">        awaitList: []</span><br><span class="line">      }</span><br><span class="line">    })</span><br><span class="line">    <span class="built_in">this</span>.order = {} <span class="comment">// &#x27;finish&#x27; &#x27;await&#x27; &#x27;cancel&#x27;</span></span><br><span class="line">  }</span><br><span class="line">  <span class="function"><span class="title">book</span>(<span class="params">orderId, cabinId, seatNum, pass</span>)</span> {</span><br><span class="line">    <span class="keyword">const</span> curCabin = <span class="built_in">this</span>.cabins[cabinId]</span><br><span class="line">    <span class="comment">// pass存在不依赖awaitList判断</span></span><br><span class="line">    <span class="keyword">if</span> ((pass ? <span class="literal">false</span> : curCabin.awaitList.length &gt; <span class="number">0</span>) || seatNum &gt; curCabin.remain) {</span><br><span class="line">      curCabin.awaitList.push({ orderId, cabinId, seatNum })</span><br><span class="line">      <span class="built_in">this</span>.order[orderId] = {</span><br><span class="line">        status: <span class="string">&#x27;await&#x27;</span>,</span><br><span class="line">        cabinId</span><br><span class="line">      }</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="literal">false</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">let</span> minSeat</span><br><span class="line">    <span class="keyword">const</span> seatInfo = [];</span><br><span class="line">    <span class="keyword">const</span> continueSeat = <span class="built_in">this</span>._hasContinueSeat(curCabin.seat, seatNum)</span><br><span class="line">    <span class="keyword">if</span> (continueSeat) {</span><br><span class="line">      <span class="keyword">const</span> { start } = continueSeat</span><br><span class="line">      minSeat = start</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; start + seatNum; i++) {</span><br><span class="line">        curCabin.seat[i] = <span class="literal">true</span></span><br><span class="line">        seatInfo.push(i)</span><br><span class="line">      }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">let</span> change = <span class="number">0</span></span><br><span class="line">      curCabin.seat.forEach(<span class="function">(<span class="params">status, i</span>) =&gt;</span> {</span><br><span class="line">        <span class="keyword">if</span> (!status &amp;&amp; change &lt; seatNum) {</span><br><span class="line">          <span class="keyword">if</span> (minSeat !== <span class="number">0</span> &amp;&amp; !minSeat) {</span><br><span class="line">            minSeat = i</span><br><span class="line">          }</span><br><span class="line">          curCabin.seat[i] = <span class="literal">true</span></span><br><span class="line">          seatInfo.push(i)</span><br><span class="line">          change++</span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">    }</span><br><span class="line">    curCabin.remain -= seatNum</span><br><span class="line">    <span class="built_in">this</span>.order[orderId] = {</span><br><span class="line">      status: <span class="string">&#x27;finish&#x27;</span>,</span><br><span class="line">      seat: minSeat,</span><br><span class="line">      seatInfo,</span><br><span class="line">      cabinId,</span><br><span class="line">      seatNum</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (!pass) {</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="literal">true</span>)</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  }</span><br><span class="line">  <span class="function"><span class="title">cancel</span>(<span class="params">orderId</span>)</span> {</span><br><span class="line">    <span class="keyword">const</span> curOrder = <span class="built_in">this</span>.order[orderId]</span><br><span class="line">    <span class="keyword">if</span> (!curOrder || curOrder.status === <span class="string">&#x27;cancel&#x27;</span>) {</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="literal">false</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 更新船舱信息（包括候补队列）</span></span><br><span class="line">    <span class="keyword">const</span> { seatInfo, cabinId, seatNum } = curOrder</span><br><span class="line">    <span class="keyword">const</span> curCabin = <span class="built_in">this</span>.cabins[cabinId]</span><br><span class="line">    <span class="keyword">if</span> (curOrder.status === <span class="string">&#x27;finish&#x27;</span>) {</span><br><span class="line">      seatInfo.forEach(<span class="function"><span class="params">seatId</span> =&gt;</span> {</span><br><span class="line">        curCabin.seat[seatId] = <span class="literal">false</span></span><br><span class="line">      })</span><br><span class="line">      curCabin.remain += seatNum</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (curOrder.status === <span class="string">&#x27;await&#x27;</span>) {</span><br><span class="line">      <span class="keyword">let</span> deletIndex</span><br><span class="line">      curCabin.awaitList.forEach(<span class="function">(<span class="params">item, i</span>) =&gt;</span> {</span><br><span class="line">        <span class="keyword">if</span> (item.orderId === orderId) {</span><br><span class="line">          deletIndex = i</span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">      curCabin.awaitList.splice(deletIndex, <span class="number">1</span>)</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">this</span>._handleAwait(curCabin.awaitList)</span><br><span class="line">    curOrder.status = <span class="string">&#x27;cancel&#x27;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// 处理等待队列</span></span><br><span class="line">  <span class="function"><span class="title">_handleAwait</span>(<span class="params">awaitList</span>)</span> {</span><br><span class="line">    <span class="keyword">if</span> (awaitList.length &gt; <span class="number">0</span>) {</span><br><span class="line">      <span class="keyword">const</span> { orderId, cabinId, seatNum } = awaitList.shift()</span><br><span class="line">      <span class="keyword">const</span> bookRes = <span class="built_in">this</span>.book(orderId, cabinId, seatNum, <span class="literal">true</span>)</span><br><span class="line">      <span class="keyword">if</span> (bookRes) {</span><br><span class="line">        <span class="built_in">this</span>._handleAwait(awaitList)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// 是否有连续座位号</span></span><br><span class="line">  <span class="function"><span class="title">_hasContinueSeat</span>(<span class="params">arr, num</span>)</span> {</span><br><span class="line">    <span class="keyword">const</span> record = []</span><br><span class="line">    <span class="keyword">let</span> pen = <span class="literal">false</span></span><br><span class="line">    arr.forEach(<span class="function">(<span class="params">s, i</span>) =&gt;</span> {</span><br><span class="line">      <span class="keyword">if</span> (!pen &amp;&amp; !s) {</span><br><span class="line">        pen = <span class="literal">true</span></span><br><span class="line">        record.push(i)</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> (pen &amp;&amp; s) {</span><br><span class="line">        pen = <span class="literal">false</span></span><br><span class="line">        record.push(i - <span class="number">1</span>)</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">if</span> (i === arr.length - <span class="number">1</span> &amp;&amp; !s) {</span><br><span class="line">        record.push(i)</span><br><span class="line">      }</span><br><span class="line">    })</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; record.length; i += <span class="number">2</span>) {</span><br><span class="line">      <span class="keyword">let</span> j = i + <span class="number">1</span></span><br><span class="line">      <span class="keyword">if</span> (j &lt; record.length) {</span><br><span class="line">        <span class="keyword">let</span> l = record[j] + <span class="number">1</span> - record[i]</span><br><span class="line">        <span class="keyword">if</span> (l &gt;= num) {</span><br><span class="line">          <span class="keyword">return</span> {</span><br><span class="line">            start: record[i]</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">  <span class="function"><span class="title">query</span>(<span class="params">orderId</span>)</span> {</span><br><span class="line">    <span class="keyword">const</span> curOrder = <span class="built_in">this</span>.order[orderId]</span><br><span class="line">    <span class="keyword">const</span> res = (curOrder &amp;&amp; curOrder.status === <span class="string">&#x27;finish&#x27;</span>) ? curOrder.seat : -<span class="number">1</span></span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> TicketSystem([<span class="number">10</span>, <span class="number">1</span>]); <span class="comment">// 初始化座位数量，舱位 0~1 分别有 10、1 个座位；</span></span><br><span class="line">obj.book(<span class="number">71</span>, <span class="number">0</span>, <span class="number">2</span>); <span class="comment">// 预订成功，座位编号连续，为 [0,1]，返回 true；</span></span><br><span class="line">obj.book(<span class="number">73</span>, <span class="number">0</span>, <span class="number">10</span>); <span class="comment">// 余票不足，预订失败进入候补队列，返回 false；</span></span><br><span class="line">obj.book(<span class="number">72</span>, <span class="number">0</span>, <span class="number">2</span>); <span class="comment">// 余票足够但候补队列非空，预定失败进入候补队列，返回 false；</span></span><br><span class="line">obj.query(<span class="number">72</span>); <span class="comment">// 返回 -1；</span></span><br><span class="line">obj.book(<span class="number">74</span>, <span class="number">0</span>, <span class="number">2</span>); <span class="comment">// 返回 false；</span></span><br><span class="line">obj.cancel(<span class="number">73</span>); <span class="comment">// 取消订单成功，处理候补队列订单：队首订单 72 预约成功，座位编号为 [2,3]；订单 74 预约成功，座位编号为 [4,5]，返回 true；</span></span><br><span class="line">obj.query(<span class="number">74</span>); <span class="comment">// 返回 4；</span></span><br><span class="line">obj.query(<span class="number">72</span>); <span class="comment">// 返回 2；</span></span><br><span class="line">obj.cancel(<span class="number">72</span>); <span class="comment">// 取消订单成功，候补队列为空无需处理，返回 true；</span></span><br><span class="line">obj.book(<span class="number">75</span>, <span class="number">0</span>, <span class="number">3</span>); <span class="comment">// 返回 true，座位连续优先，座位编号为 [6,7,8]；</span></span><br><span class="line">obj.query(<span class="number">75</span>); <span class="comment">// 返回 6；</span></span><br><span class="line">obj.cancel(<span class="number">75</span>); <span class="comment">// 返回 true；</span></span><br><span class="line">obj.book(<span class="number">76</span>, <span class="number">0</span>, <span class="number">2</span>); <span class="comment">// 返回 true，座位编号为 [2,3]；</span></span><br><span class="line">obj.book(<span class="number">77</span>, <span class="number">0</span>, <span class="number">2</span>); <span class="comment">// 返回 true，座位编号为 [6,7]；</span></span><br><span class="line">obj.cancel(<span class="number">76</span>); <span class="comment">// 返回 true；</span></span><br><span class="line">obj.book(<span class="number">78</span>, <span class="number">0</span>, <span class="number">3</span>); <span class="comment">// 返回 true，无连续座位，座位编号为 [2,3,8]；</span></span><br><span class="line">obj.query(<span class="number">78</span>); <span class="comment">// 返回订单 78 最小的座位编号 2；</span></span><br></pre></td></tr></table></figure></div><div class="tags"><a href="/leetcode/tags/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"><i class="fa fa-tag"></i>程序设计</a></div><div class="post-nav"><a class="pre" href="/leetcode/2021/11/03/%E5%8F%AF%E4%BF%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E6%9C%80%E5%A4%A7%E6%B7%B1%E5%BA%A6/">可信二叉树最大深度</a><a class="next" href="/leetcode/2021/09/22/1845%E3%80%81%E5%BA%A7%E4%BD%8D%E9%A2%84%E7%BA%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">1845、座位预约管理系统</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://lelouch_hua.gitee.io/leetcode"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/leetcode/categories/Exams/">Exams</a></li><li class="category-list-item"><a class="category-list-link" href="/leetcode/categories/LCP/">LCP</a></li><li class="category-list-item"><a class="category-list-link" href="/leetcode/categories/%E5%89%91%E6%8C%87Offer/">剑指Offer</a></li><li class="category-list-item"><a class="category-list-link" href="/leetcode/categories/%E7%9C%9F%E9%A2%98/">真题</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/leetcode/tags/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/" style="font-size: 15px;">拓扑排序</a> <a href="/leetcode/tags/%E5%88%86%E6%B2%BB/" style="font-size: 15px;">分治</a> <a href="/leetcode/tags/tree/" style="font-size: 15px;">tree</a> <a href="/leetcode/tags/%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/" style="font-size: 15px;">广度优先搜索</a> <a href="/leetcode/tags/%E5%B7%AE%E5%88%86/" style="font-size: 15px;">差分</a> <a href="/leetcode/tags/%E5%8F%8C%E6%8C%87%E9%92%88/" style="font-size: 15px;">双指针</a> <a href="/leetcode/tags/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" style="font-size: 15px;">贪心算法</a> <a href="/leetcode/tags/graph/" style="font-size: 15px;">graph</a> <a href="/leetcode/tags/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2/" style="font-size: 15px;">深度优先搜索</a> <a href="/leetcode/tags/%E8%AE%BE%E8%AE%A1/" style="font-size: 15px;">设计</a> <a href="/leetcode/tags/map/" style="font-size: 15px;">map</a> <a href="/leetcode/tags/listNode/" style="font-size: 15px;">listNode</a> <a href="/leetcode/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" style="font-size: 15px;">二分查找</a> <a href="/leetcode/tags/%E6%A8%A1%E6%8B%9F/" style="font-size: 15px;">模拟</a> <a href="/leetcode/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 15px;">排序</a> <a href="/leetcode/tags/%E5%9B%9E%E6%BA%AF/" style="font-size: 15px;">回溯</a> <a href="/leetcode/tags/%E6%9C%80%E5%B0%8F%E5%A0%86/" style="font-size: 15px;">最小堆</a> <a href="/leetcode/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 15px;">动态规划</a> <a href="/leetcode/tags/%E5%9B%BE/" style="font-size: 15px;">图</a> <a href="/leetcode/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" style="font-size: 15px;">二叉树</a> <a href="/leetcode/tags/%E5%B9%BF%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86/" style="font-size: 15px;">广度优先遍历</a> <a href="/leetcode/tags/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/" style="font-size: 15px;">滑动窗口</a> <a href="/leetcode/tags/stack/" style="font-size: 15px;">stack</a> <a href="/leetcode/tags/heap/" style="font-size: 15px;">heap</a> <a href="/leetcode/tags/set/" style="font-size: 15px;">set</a> <a href="/leetcode/tags/binarySearch/" style="font-size: 15px;">binarySearch</a> <a href="/leetcode/tags/dfs/" style="font-size: 15px;">dfs</a> <a href="/leetcode/tags/pointer/" style="font-size: 15px;">pointer</a> <a href="/leetcode/tags/%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E9%81%8D%E5%8E%86/" style="font-size: 15px;">深度优先遍历</a> <a href="/leetcode/tags/01%E8%83%8C%E5%8C%85/" style="font-size: 15px;">01背包</a> <a href="/leetcode/tags/%E5%8D%95%E8%B0%83%E6%A0%88/" style="font-size: 15px;">单调栈</a> <a href="/leetcode/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/" style="font-size: 15px;">并查集</a> <a href="/leetcode/tags/%E5%89%8D%E7%BC%80%E5%92%8C-map/" style="font-size: 15px;">前缀和 + map</a> <a href="/leetcode/tags/%E7%8A%B6%E6%80%81%E6%9C%BA/" style="font-size: 15px;">状态机</a> <a href="/leetcode/tags/%E9%80%92%E5%87%8F%E6%A0%88/" style="font-size: 15px;">递减栈</a> <a href="/leetcode/tags/queque/" style="font-size: 15px;">queque</a> <a href="/leetcode/tags/BFS/" style="font-size: 15px;">BFS</a> <a href="/leetcode/tags/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" style="font-size: 15px;">程序设计</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/leetcode/2021/11/05/%E7%BE%8E%E5%9B%A2%E7%9C%9F%E9%A2%98/">美团真题</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/2021/11/05/729.%20%E6%88%91%E7%9A%84%E6%97%A5%E7%A8%8B%E5%AE%89%E6%8E%92%E8%A1%A8%20I/">729. 我的日程安排表 I</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/2021/11/05/%E5%AE%9E%E9%AA%8C%E5%AE%A4%E9%A2%84%E7%BA%A6%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">实验室预约系统设计</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/2021/11/03/%E5%8F%AF%E4%BF%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E6%9C%80%E5%A4%A7%E6%B7%B1%E5%BA%A6/">可信二叉树最大深度</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/2021/09/23/%E8%88%B9%E7%A5%A8%E9%A2%84%E5%AE%9A%E7%B3%BB%E7%BB%9F/">船票预定系统</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/2021/09/22/1845%E3%80%81%E5%BA%A7%E4%BD%8D%E9%A2%84%E7%BA%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">1845、座位预约管理系统</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/2021/09/22/1396%E3%80%81%E8%AE%BE%E8%AE%A1%E5%9C%B0%E9%93%81%E7%B3%BB%E7%BB%9F/">1396、设计地铁系统</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/2021/09/02/165%E3%80%81%E6%AF%94%E8%BE%83%E7%89%88%E6%9C%AC%E5%8F%B7/">165、比较版本号</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/2021/08/26/881%E3%80%81%E6%95%91%E7%94%9F%E8%89%87/">881、救生艇</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/2021/08/26/743%E3%80%81%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F%E6%97%B6%E9%97%B4/">743、网络延迟时间</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/leetcode/." rel="nofollow">lelouch的leetcode刷题记录.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/leetcode/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="/leetcode/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/leetcode/js/smartresize.js?v=1.0.0"></script></div></body></html>